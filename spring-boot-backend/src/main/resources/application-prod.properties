# ===========================================
# Production Profile Configuration
# ===========================================

# ===========================================
# Database Configuration (PostgreSQL)
# ===========================================
spring.datasource.url=jdbc:postgresql://localhost:5432/studybud
spring.datasource.username=${DB_USERNAME:studybud_user}
spring.datasource.password=${DB_PASSWORD:changeme}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ===========================================
# JPA Configuration (Production)
# ===========================================
# IMPORTANT: Use 'validate' or 'none' in production
# Use 'update' only for initial setup
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Connection pool configuration
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# ===========================================
# Server Configuration
# ===========================================
server.port=${PORT:8080}

# ===========================================
# JWT Configuration (Use environment variables)
# ===========================================
jwt.secret=${JWT_SECRET:please-change-this-to-a-secure-secret-key}
jwt.expiration=86400000
jwt.refresh-expiration=604800000

# ===========================================
# File Upload
# ===========================================
file.upload-dir=${FILE_UPLOAD_DIR:./uploads}

# ===========================================
# CORS Configuration (Production domains)
# ===========================================
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://yourdomain.com}

# ===========================================
# Logging (Production)
# ===========================================
logging.level.root=WARN
logging.level.com.studybud=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN

# Log to file in production
logging.file.name=/var/log/study-bud/application.log
logging.file.max-size=50MB
logging.file.max-history=30

# ===========================================
# Actuator (Limited in production)
# ===========================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=never

# ===========================================
# Error Handling (Limited details in production)
# ===========================================
server.error.include-stacktrace=never
server.error.include-exception=false
server.error.include-binding-errors=never
server.error.include-message=always

# ===========================================
# SSL/HTTPS (Enable if using SSL)
# ===========================================
# server.ssl.enabled=true
# server.ssl.key-store=classpath:keystore.p12
# server.ssl.key-store-password=changeit
# server.ssl.key-store-type=PKCS12
# server.ssl.key-alias=tomcat

# ===========================================
# Security Headers
# ===========================================
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,application/javascript,application/json
server.http2.enabled=true

